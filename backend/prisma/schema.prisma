// backend/prisma/schema.prisma
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model ChatHistory {
  id        Int      @id @default(autoincrement())
  role      String
  content   String
  model     String?
  createdAt DateTime @default(now())
}

// ğŸ“„ ë²•ê·œ ì›ë³¸ ë¬¸ì„œ ëª¨ë¸
model Document {
  id        String   @id @default(uuid())
  title     String
  content   String   @db.Text
  metadata  Json?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  chunks    DocumentChunk[]
}

// ğŸ§© ë²¡í„° ê²€ìƒ‰ì„ ìœ„í•œ ë¬¸ì„œ ì¡°ê° ëª¨ë¸
model DocumentChunk {
  id          String   @id @default(uuid())
  documentId  String
  document    Document @relation(fields: [documentId], references: [id], onDelete: Cascade)
  content     String   @db.Text
  
  // ğŸ’¡ pgvectorë¥¼ ìœ„í•œ íŠ¹ìˆ˜ íƒ€ì… ì„¤ì • (1024ì°¨ì›)
  //embedding   Unsupported("vector(1024)")?
  
  metadata    Json?
  createdAt   DateTime @default(now())

  @@index([documentId])
}